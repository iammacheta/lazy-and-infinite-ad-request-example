<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Lazy Loading Ads</title>
  <script async src="https://securepubads.g.doubleclick.net/tag/js/gpt.js"></script>
  <script>
    window.googletag = window.googletag || { cmd: [] };

    googletag.cmd.push(function () {
      // Define the initial ad slot
      googletag.defineSlot('/21974715207/web-test-horizontal-display-banner', [728, 90], 'ad-slot-1')
        .setTargeting("test", "infinitescroll")
        .addService(googletag.pubads());
      googletag.pubads().enableSingleRequest();
      googletag.enableServices();
    });

    document.addEventListener('DOMContentLoaded', function () {
      let firstAdLoaded = false;
      let secondAdLoaded = false;

      window.addEventListener('scroll', function () {
        const scrollTop = window.pageYOffset || document.documentElement.scrollTop;

        if (!firstAdLoaded && scrollTop > 200) {
          googletag.cmd.push(function () {
            googletag.display('ad-slot-1');
          });
          firstAdLoaded = true;
        }

        if (!secondAdLoaded && scrollTop > 600) {
          moreContent();
          secondAdLoaded = true;
        }
      });
    });

    function moreContent() {
      googletag.cmd.push(() => {
        // Define a new ad slot.
        const slot = googletag
          .defineSlot('/21974715207/web-test-horizontal-display-banner', [728, 90])
          .setTargeting("test", "infinitescroll")
          .addService(googletag.pubads());

        // Create a container for the slot and add it to the page.
        const div = document.createElement('div');
        div.id = slot.getSlotElementId(); // auto-generated by GPT
        div.style.width = '728px';
        div.style.height = '90px';
        div.style.backgroundColor = '#f0f0f0';
        document.body.appendChild(div);

        // Request and render an ad for the newly created slot.
        googletag.display(slot);
      });
    }
  </script>
</head>

<body>
  <div style="height: 800px;">Scroll down to load the first ad</div>
  <div id="ad-slot-1" style="width: 728px; height: 90px; background-color: #f0f0f0;">Ad Slot 1</div>
  <div style="height: 600px;">Scroll down to load the second ad</div>
</body>

</html>